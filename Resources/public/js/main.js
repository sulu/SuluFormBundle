/**
 * Generated by https://github.com/alexander-schranz/sulu-backend-bundle.
 */

require.config({
    paths: {
        suluform: '../../suluform/js',
        suluformcss: '../../suluform/css',

        "type/formSelect": '../../suluform/js/validation/types/formSelect',
        "type/select-type-custom": '../../suluform/js/validation/types/select-type-custom'
    }
});

define(['css!suluformcss/main'], function() {
    return {
        name: "SuluFormBundle",

        initialize: function(app) {
            'use strict';
            var sandbox = app.sandbox;

            app.components.addSource('suluform', '/bundles/suluform/js/components');

            function getContentLanguage() {
                // FIXME do not use user locale as default use default language of system instead
                return sandbox.sulu.getUserSetting('contentLanguage') || sandbox.sulu.getDefaultContentLocale();
            }

            // no language redirect: Generated by https://github.com/alexander-schranz/sulu-backend-bundle.
            sandbox.mvc.routes.push({
                route: 'forms',
                callback: function () {
                    var language = getContentLanguage();
                    sandbox.emit('sulu.router.navigate', 'forms/' + language);
                }
            });

            // list all entities: Generated by https://github.com/alexander-schranz/sulu-backend-bundle.
            sandbox.mvc.routes.push({
                route: 'forms/:language',
                callback: function (language) {
                    return '<div data-aura-component="forms@suluform" data-aura-language="' + language + '" data-aura-display="list"/>';
                }
            });

            // add entity: Generated by https://github.com/alexander-schranz/sulu-backend-bundle.
            sandbox.mvc.routes.push({
                route: 'forms/:language/add/:content',
                callback: function (language, content) {
                    return '<div data-aura-component="forms/tabs@suluform" data-aura-language="' + language + '" data-aura-content="' + content + '"/>';
                }
            });

            // edit entity: Generated by https://github.com/alexander-schranz/sulu-backend-bundle.
            sandbox.mvc.routes.push({
                route: 'forms/:language/edit::id/:content',
                callback: function (language, id, content) {
                    return '<div data-aura-component="forms/tabs@suluform" data-aura-language="' + language + '" data-aura-id="' + id + '" data-aura-content="' + content + '"/>';
                }
            });
        }
    }
});
